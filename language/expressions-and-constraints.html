

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Expressions and Constraints &mdash; Alloy Documentation  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Predicates and Functions" href="predicates-and-functions.html" />
    <link rel="prev" title="Sets and Relations" href="sets-and-relations.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Alloy Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Language</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="signatures.html">Signatures</a></li>
<li class="toctree-l2"><a class="reference internal" href="sets-and-relations.html">Sets and Relations</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Expressions and Constraints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#expressions">Expressions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#let">Let</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implies-else">implies - else</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#constraints">Constraints</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bar-expressions">Bar expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#paragraph-expressions">Paragraph expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#constraint-types">Constraint Types</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="predicates-and-functions.html">Predicates and Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tooling/index.html">Tooling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/index.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../techniques/index.html">Techniques</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Alloy Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Language</a> &raquo;</li>
        
      <li>Expressions and Constraints</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/language/expressions-and-constraints.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="expressions-and-constraints">
<h1>Expressions and Constraints<a class="headerlink" href="#expressions-and-constraints" title="Permalink to this headline">¶</a></h1>
<div class="section" id="expressions">
<span id="id1"></span><h2>Expressions<a class="headerlink" href="#expressions" title="Permalink to this headline">¶</a></h2>
<p>Expressions are anything that returns a number, boolean, or set. Boolean
expressions are also called <a class="reference internal" href="#constraints"><span class="std std-ref">Constraints</span></a>.</p>
<p>Information about relational expressions are found in the <a class="reference internal" href="sets-and-relations.html#sets"><span class="std std-ref">Sets</span></a> and <a class="reference internal" href="sets-and-relations.html#relations"><span class="std std-ref">Relations</span></a> chapters. There are two additional constructs that can be used with both boolean and relational
expressions.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="sets-and-relations.html#integers"><span class="std std-ref">Integer</span></a> expressions</p>
</div>
<div class="section" id="let">
<span id="id2"></span><h3>Let<a class="headerlink" href="#let" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">let</span></code> defines a local value for the purposes of the subexpression.</p>
<div class="highlight-alloy notranslate"><div class="highlight"><pre><span></span><span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="n">A</span> <span class="o">+</span> <span class="n">B</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">C</span> <span class="o">+</span> <span class="n">D</span> <span class="o">|</span>
   <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
<p>In the context of the <code class="docutils literal notranslate"><span class="pre">let</span></code> expression <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">(A</span> <span class="pre">+</span> <span class="pre">B)</span> <span class="pre">+</span> <span class="pre">(C</span> <span class="pre">+</span> <span class="pre">D)</span></code>.
<code class="docutils literal notranslate"><span class="pre">let</span></code> is mostly used to simplify complex expressions and give
meaningful names to intermediate computations.</p>
<p>If writing a boolean expression, you may use a <code class="docutils literal notranslate"><span class="pre">{}</span></code> instead of <code class="docutils literal notranslate"><span class="pre">|</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">let</span></code> bindings are not recursive. A <code class="docutils literal notranslate"><span class="pre">let</span></code> binding may not refer to
itself or a future <code class="docutils literal notranslate"><span class="pre">let</span></code> binding.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As with <a class="reference internal" href="predicates-and-functions.html#predicates"><span class="std std-ref">predicate</span></a> parameters, <code class="docutils literal notranslate"><span class="pre">let</span></code> can <a class="reference internal" href="predicates-and-functions.html#id6"><span class="std std-ref">shadow</span></a> a global value. You can use the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> operator to retrieve the global value.</p>
</div>
</div>
<div class="section" id="implies-else">
<span id="implies"></span><h3>implies - else<a class="headerlink" href="#implies-else" title="Permalink to this headline">¶</a></h3>
<p>When used in conjunction with <code class="docutils literal notranslate"><span class="pre">else</span></code>, <code class="docutils literal notranslate"><span class="pre">implies</span></code> acts as a
conditional. <code class="docutils literal notranslate"><span class="pre">p</span> <span class="pre">implies</span> <span class="pre">A</span> <span class="pre">else</span> <span class="pre">B</span></code> returns A if p is true and B if p is
false. <code class="docutils literal notranslate"><span class="pre">p</span></code> must be a boolean expression.</p>
<p>If A and B are boolean expressions, then this acts as a constraint. The <code class="docutils literal notranslate"><span class="pre">else</span></code> can be left out if using <code class="docutils literal notranslate"><span class="pre">implies</span></code> as a constraint. See <a class="reference internal" href="#implies-constraint"><span class="std std-ref">below</span></a> for details.</p>
</div>
</div>
<div class="section" id="constraints">
<span id="id3"></span><h2>Constraints<a class="headerlink" href="#constraints" title="Permalink to this headline">¶</a></h2>
<div class="section" id="bar-expressions">
<span id="bar"></span><h3>Bar expressions<a class="headerlink" href="#bar-expressions" title="Permalink to this headline">¶</a></h3>
<p>A bar expression is one of the form:</p>
<div class="highlight-alloy notranslate"><div class="highlight"><pre><span></span><span class="k">some</span> <span class="n">x</span><span class="p">:</span> <span class="n">Set</span> <span class="o">|</span>
  <span class="n">expr</span>
</pre></div>
</div>
<p>In this context, the expression is true iff <code class="docutils literal notranslate"><span class="pre">expr</span></code> is true. The newline is optional.</p>
</div>
<div class="section" id="paragraph-expressions">
<h3>Paragraph expressions<a class="headerlink" href="#paragraph-expressions" title="Permalink to this headline">¶</a></h3>
<p>If multiple constraints are surrounded with braces, they are all
<code class="docutils literal notranslate"><span class="pre">and</span></code>-ed together. The following two are equivalent:</p>
<div class="highlight-alloy notranslate"><div class="highlight"><pre><span></span><span class="n">expr1</span> <span class="ow">or</span> <span class="o">{</span>
  <span class="n">expr2</span>
  <span class="n">expr3</span>
    <span class="o">...</span>
<span class="o">}</span>

<span class="n">expr1</span> <span class="ow">or</span> <span class="o">(</span><span class="n">expr</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">expr3</span> <span class="ow">and</span> <span class="o">...)</span>
</pre></div>
</div>
</div>
<div class="section" id="constraint-types">
<span id="id4"></span><h3>Constraint Types<a class="headerlink" href="#constraint-types" title="Permalink to this headline">¶</a></h3>
<p>All constraints can be inverted with <code class="docutils literal notranslate"><span class="pre">not</span></code> or <code class="docutils literal notranslate"><span class="pre">!</span></code>. To say that A is
not a subset of B, you can write <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">!in</span> <span class="pre">B</span></code>, <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">not</span> <span class="pre">in</span> <span class="pre">B</span></code>,
<code class="docutils literal notranslate"><span class="pre">!(A</span> <span class="pre">in</span> <span class="pre">B)</span></code>, etc.</p>
<div class="section" id="relation-constraints">
<h4>Relation Constraints<a class="headerlink" href="#relation-constraints" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id5">
<span id="id6"></span><h5><code class="docutils literal notranslate"><span class="pre">=</span></code><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">=</span> <span class="pre">B</span></code> means that both sets of atoms or relations have the exact same
elements. <code class="docutils literal notranslate"><span class="pre">=</span></code> <em>cannot</em> be used to compare two booleans. Use <code class="docutils literal notranslate"><span class="pre">iff</span></code>
instead.</p>
</div>
<div class="section" id="in">
<span id="id7"></span><h5><code class="docutils literal notranslate"><span class="pre">in</span></code><a class="headerlink" href="#in" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">in</span> <span class="pre">B</span></code> means that every element of A is also an element of B.
This is also known as a “subset” relation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">in</span> <span class="pre">A</span></code> means that x is an element of the set A.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The above two definitions are equivalent as all atoms are singleton sets: x is the set containing x, so <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">in</span> <span class="pre">A</span></code> is “the set containing just x is a subset of A”.</p>
</div>
</div>
<div class="section" id="size-constraints">
<span id="id8"></span><h5>size constraints<a class="headerlink" href="#size-constraints" title="Permalink to this headline">¶</a></h5>
<p>There are four constraints on the number of elements in a set:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">no</span> <span class="pre">A</span></code> means A is empty.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">some</span> <span class="pre">A</span></code> means A has <em>at least one</em> element.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">one</span> <span class="pre">A</span></code> means A has <em>exactly one</em> element.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lone</span> <span class="pre">A</span></code> means A is either empty or has exactly one element.</p></li>
</ul>
<p>In practice, <code class="docutils literal notranslate"><span class="pre">no</span></code> and <code class="docutils literal notranslate"><span class="pre">some</span></code> are considerably more useful than
<code class="docutils literal notranslate"><span class="pre">one</span></code> and <code class="docutils literal notranslate"><span class="pre">lone</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Relations are each exactly one element, no matter the order of the relation. If <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b,</span></code> and <code class="docutils literal notranslate"><span class="pre">c</span></code> are individual atoms, <code class="docutils literal notranslate"><span class="pre">(a</span> <span class="pre">-&gt;</span> <span class="pre">b</span> <span class="pre">-&gt;</span> <span class="pre">c)</span></code> is exactly one element, while <code class="docutils literal notranslate"><span class="pre">(a</span> <span class="pre">-&gt;</span> <span class="pre">b)</span> <span class="pre">+</span> <span class="pre">(a</span> <span class="pre">-&gt;</span> <span class="pre">c)</span></code> is two.</p>
</div>
</div>
<div class="section" id="disj-a-b">
<span id="disj-constraint"></span><h5><code class="docutils literal notranslate"><span class="pre">disj[A,</span> <span class="pre">B]</span></code><a class="headerlink" href="#disj-a-b" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">disj[A,</span> <span class="pre">B]</span></code> is the predicate “A and B share no elements in common”.
Any number of arguments can be used, in which case <code class="docutils literal notranslate"><span class="pre">disj</span></code> is
<em>pairwise-disjoint</em>. This means that <code class="docutils literal notranslate"><span class="pre">disj[A,</span> <span class="pre">B,</span> <span class="pre">C]</span></code> is equivalent to
<code class="docutils literal notranslate"><span class="pre">disj[A,</span> <span class="pre">B]</span> <span class="pre">and</span> <span class="pre">disj[B,</span> <span class="pre">C]</span> <span class="pre">and</span> <span class="pre">disj[A,</span> <span class="pre">C]</span></code>.</p>
</div>
</div>
<div class="section" id="boolean-constraints">
<h4>Boolean Constraints<a class="headerlink" href="#boolean-constraints" title="Permalink to this headline">¶</a></h4>
<p>Boolean constraints operate on booleans or predicates. They can be used
to create more complex constraints.</p>
<p>All boolean constraints have two different forms, a symbolic form and an
English form. For example, <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&amp;&amp;</span> <span class="pre">B</span></code> can also be written <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">and</span> <span class="pre">B</span></code>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 61%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>word</p></th>
<th class="head"><p>symbol</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">and</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">or</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">||</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">not</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">!</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">implies</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">=&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">iff</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;=&gt;</span></code></p></td>
</tr>
</tbody>
</table>
<p>The first three are self-explanatory. The other two are covered below:</p>
<div class="section" id="implies-constraint">
<span id="id10"></span><h5><code class="docutils literal notranslate"><span class="pre">implies</span></code> (<code class="docutils literal notranslate"><span class="pre">=&gt;</span></code>)<a class="headerlink" href="#implies-constraint" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">implies</span> <span class="pre">Q</span></code> is true if Q is true whenever P is true. If P is true
and Q is false, then <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">implies</span> <span class="pre">Q</span></code> is false. If P is false, then
<code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">implies</span> <span class="pre">Q</span></code> is automatically true. <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">implies</span> <span class="pre">Q</span> <span class="pre">else</span> <span class="pre">T</span></code> is true if P and Q are true or if P is false and T is true.</p>
<p>(Consider the statement <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&gt;</span> <span class="pre">5</span> <span class="pre">implies</span> <span class="pre">x</span> <span class="pre">&gt;</span> <span class="pre">3</span></code>. If we pick <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">4</span></code>,
then we have <code class="docutils literal notranslate"><span class="pre">false</span> <span class="pre">implies</span> <span class="pre">true</span></code>).</p>
</div>
<div class="section" id="iff">
<h5><code class="docutils literal notranslate"><span class="pre">iff</span></code> (<code class="docutils literal notranslate"><span class="pre">&lt;=&gt;</span></code>)<a class="headerlink" href="#iff" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">iff</span> <span class="pre">Q</span></code> is true if P and Q are both true or both false. Use this for
booleans instead of <code class="docutils literal notranslate"><span class="pre">=</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><code class="docutils literal notranslate"><span class="pre">xor[A,</span> <span class="pre">B]</span></code> can be written as <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">&lt;=&gt;</span> <span class="pre">!B</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="quantifiers">
<span id="id11"></span><h4>Quantifiers<a class="headerlink" href="#quantifiers" title="Permalink to this headline">¶</a></h4>
<p>A <strong>quantifier</strong> is an expression about the elements of a set. All of
them have the form</p>
<div class="highlight-alloy notranslate"><div class="highlight"><pre><span></span><span class="k">some</span> <span class="n">x</span><span class="p">:</span> <span class="n">A</span> <span class="o">|</span>
  <span class="n">expr</span>
</pre></div>
</div>
<p>This expression is true if <code class="docutils literal notranslate"><span class="pre">expr</span></code> is true for any element of the set
of atoms <code class="docutils literal notranslate"><span class="pre">A</span></code>. As with <code class="docutils literal notranslate"><span class="pre">let</span></code>, <code class="docutils literal notranslate"><span class="pre">x</span></code> becomes a valid identifier in the
body of the constraint.</p>
<p>Instead of using a pipe, you can also write it as</p>
<div class="highlight-alloy notranslate"><div class="highlight"><pre><span></span><span class="k">some</span> <span class="n">x</span><span class="p">:</span> <span class="n">Set</span> <span class="o">{</span>
  <span class="n">expr1</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>In which case it is treated as a standard paragraph expression.</p>
<p>The following quantifiers are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">some</span> <span class="pre">x:</span> <span class="pre">A</span> <span class="pre">|</span> <span class="pre">expr</span></code> is true for <em>at least one</em> element in <code class="docutils literal notranslate"><span class="pre">A</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all</span> <span class="pre">x:</span> <span class="pre">A</span> <span class="pre">|</span> <span class="pre">expr</span></code> is true for <em>every</em> element in <code class="docutils literal notranslate"><span class="pre">A</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">no</span> <span class="pre">x:</span> <span class="pre">A</span> <span class="pre">|</span> <span class="pre">expr</span></code> is <strong>false</strong> for every element of <code class="docutils literal notranslate"><span class="pre">A</span></code>.</p></li>
<li><p>[A] <code class="docutils literal notranslate"><span class="pre">one</span> <span class="pre">x:</span> <span class="pre">A</span> <span class="pre">|</span> <span class="pre">expr</span></code> is true for exactly one element of <code class="docutils literal notranslate"><span class="pre">A</span></code>.</p></li>
<li><p>[A] <code class="docutils literal notranslate"><span class="pre">lone</span> <span class="pre">x:</span> <span class="pre">A</span></code> is equivalent to
<code class="docutils literal notranslate"><span class="pre">(one</span> <span class="pre">x:</span> <span class="pre">A</span> <span class="pre">|</span> <span class="pre">expr)</span> <span class="pre">or</span> <span class="pre">(no</span> <span class="pre">x:</span> <span class="pre">A</span> <span class="pre">|</span> <span class="pre">expr)</span></code>.</p></li>
</ul>
<p>As <a class="reference internal" href="#multiple-quantifiers"><span class="std std-ref">discussed below</span></a>, <code class="docutils literal notranslate"><span class="pre">one</span></code> and <code class="docutils literal notranslate"><span class="pre">lone</span></code> can have some unintuitive
consequences.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>As with all constraints, <code class="docutils literal notranslate"><span class="pre">A</span></code> can be any set expression. So you can write <code class="docutils literal notranslate"><span class="pre">some</span> <span class="pre">x:</span> <span class="pre">(A</span> <span class="pre">+</span> <span class="pre">B</span> <span class="pre">-</span> <span class="pre">C).rel</span></code>, etc.</p>
</div>
<div class="section" id="multiple-quantifiers">
<span id="id12"></span><h5>Multiple Quantifiers<a class="headerlink" href="#multiple-quantifiers" title="Permalink to this headline">¶</a></h5>
<p>There are two syntaxes to quantify over multiple elements:</p>
<div class="highlight-alloy notranslate"><div class="highlight"><pre><span></span><span class="c1">-- 1</span>
<span class="k">some</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">...</span><span class="p">:</span> <span class="n">A</span> <span class="o">|</span> <span class="n">expr</span>

<span class="c1">-- 2</span>
<span class="k">some</span> <span class="n">x</span><span class="p">:</span> <span class="n">A</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">B</span><span class="p">,</span> <span class="o">...</span> <span class="o">|</span> <span class="n">expr</span>
</pre></div>
</div>
<p>For case (1) all elements will be drawn from <code class="docutils literal notranslate"><span class="pre">A</span></code>. For case (2) the
quantifier will be over all possible combinations of elements from A and
B. The two forms can be combined, as in
<code class="docutils literal notranslate"><span class="pre">all</span> <span class="pre">x,</span> <span class="pre">y:</span> <span class="pre">A,</span> <span class="pre">z:</span> <span class="pre">B,</span> <span class="pre">...</span> <span class="pre">|</span> <span class="pre">expr</span></code>.</p>
<p>Elements drawn do <strong>not</strong> need to be distinct. This means, for example,
that the following is automatically false if A has any elements:</p>
<div class="highlight-alloy notranslate"><div class="highlight"><pre><span></span><span class="k">all</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">A</span> <span class="o">|</span>
  <span class="n">x</span><span class="o">.</span><span class="n">rel</span> <span class="o">!=</span> <span class="n">y</span><span class="o">.</span><span class="n">rel</span>
</pre></div>
</div>
<p>As we can pick the same element for <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>. If this is not your
intention, there are two ways to fix this:</p>
<div class="highlight-alloy notranslate"><div class="highlight"><pre><span></span><span class="c1">-- 1</span>
<span class="k">all</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">A</span> <span class="o">|</span>
  <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span> <span class="o">=&gt;</span> <span class="n">x</span><span class="o">.</span><span class="n">rel</span> <span class="o">!=</span> <span class="n">y</span><span class="o">.</span><span class="n">rel</span>

<span class="c1">-- 2</span>
<span class="k">all</span> <span class="k">disj</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">A</span> <span class="o">|</span>
  <span class="n">x</span><span class="o">.</span><span class="n">rel</span> <span class="o">!=</span> <span class="n">y</span><span class="o">.</span><span class="n">rel</span>
</pre></div>
</div>
<p>For case (1) we can still select the same element for <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>;
however, the <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">!=</span> <span class="pre">y</span></code> clause will be false, making the whole clause
true. For case (2), using <code class="docutils literal notranslate"><span class="pre">disj</span></code> in a quantifier means we cannot
select the same element for two variables.</p>
<p><code class="docutils literal notranslate"><span class="pre">one</span></code> and <code class="docutils literal notranslate"><span class="pre">lone</span></code> behave unintuitively when used in
multiple quantifiers. The following two statements are different:</p>
<div class="highlight-alloy notranslate"><div class="highlight"><pre><span></span><span class="k">one</span> <span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">:</span> <span class="n">S</span> <span class="o">|</span> <span class="n">P</span><span class="o">[</span><span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="o">]</span> <span class="c1">-- 1</span>
<span class="k">one</span> <span class="n">f</span><span class="p">:</span> <span class="n">S</span> <span class="o">|</span> <span class="k">one</span> <span class="n">g</span><span class="p">:</span> <span class="n">S</span> <span class="o">|</span> <span class="n">P</span><span class="o">[</span><span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="o">]</span> <span class="c1">-- 2</span>
</pre></div>
</div>
<p>Constraint (1) is only true if there is <em>exactly one</em> pair f, g that
satisfies predicate P. Constraint (2) says that there’s exactly one f
such that there’s exactly one g. The following truth table will satisfy
clause (2) <em>but not</em> (1):</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>f</p></th>
<th class="head"><p>g</p></th>
<th class="head"><p>P[f, g]</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>A</p></td>
<td><p>B</p></td>
<td><p>T</p></td>
</tr>
<tr class="row-odd"><td><p>A</p></td>
<td><p>C</p></td>
<td><p>T</p></td>
</tr>
<tr class="row-even"><td><p>B</p></td>
<td><p>A</p></td>
<td><p>T</p></td>
</tr>
<tr class="row-odd"><td><p>B</p></td>
<td><p>C</p></td>
<td><p>T</p></td>
</tr>
<tr class="row-even"><td><p>C</p></td>
<td><p>B</p></td>
<td><p>T</p></td>
</tr>
<tr class="row-odd"><td><p>C</p></td>
<td><p>A</p></td>
<td><p>F</p></td>
</tr>
</tbody>
</table>
<p>As C is the only one where there is <em>exactly one</em> g that satisfies P[C,
g]. As a rule of thumb, use only <code class="docutils literal notranslate"><span class="pre">some</span></code> and <code class="docutils literal notranslate"><span class="pre">all</span></code> when writing
multiple clauses.</p>
</div>
<div class="advanced section" id="relational-quantifiers">
<h5>Relational Quantifiers<a class="headerlink" href="#relational-quantifiers" title="Permalink to this headline">¶</a></h5>
<p>When using a <a class="reference internal" href="commands.html#run"><span class="std std-ref">run</span></a> command, you can define a <code class="docutils literal notranslate"><span class="pre">some</span></code> quantifier over a relation:</p>
<div class="highlight-alloy notranslate"><div class="highlight"><pre><span></span><span class="kd">sig</span> <span class="n">Node</span> <span class="o">{</span>
    <span class="n">edge</span><span class="p">:</span> <span class="k">set</span> <span class="n">Node</span>
<span class="o">}</span>

<span class="k">pred</span> <span class="n">has_self_loop</span> <span class="o">{</span>
    <span class="k">some</span> <span class="n">e</span><span class="p">:</span> <span class="n">edge</span> <span class="o">|</span> <span class="n">e</span> <span class="o">=</span> <span class="o">~</span><span class="n">e</span>

<span class="o">}</span>

<span class="k">run</span> <span class="o">{</span>
    <span class="n">has_self_loop</span>
<span class="o">}</span>
</pre></div>
</div>
<p>When using a <a class="reference internal" href="commands.html#check"><span class="std std-ref">check</span></a> command, you can define <code class="docutils literal notranslate"><span class="pre">all</span></code> and <code class="docutils literal notranslate"><span class="pre">no</span></code> quantifiers over relations:</p>
<div class="highlight-alloy notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">no_self_loops</span> <span class="o">{</span>
        <span class="k">no</span> <span class="n">e</span><span class="p">:</span> <span class="n">edge</span> <span class="o">|</span> <span class="n">e</span> <span class="o">=</span> <span class="o">~</span><span class="n">e</span>
      <span class="o">}</span>

<span class="k">check</span> <span class="n">no_self_loops</span>
</pre></div>
</div>
<p>You <strong>cannot</strong> use <code class="docutils literal notranslate"><span class="pre">all</span></code> or <code class="docutils literal notranslate"><span class="pre">no</span></code> in a run command or use <code class="docutils literal notranslate"><span class="pre">some</span></code> in a check command. You <strong>cannot</strong> use higher-order quantifiers in the <a class="reference internal" href="../tooling/visualizer.html#evaluator"><span class="std std-ref">Evaluator</span></a> regardless of the command.</p>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="predicates-and-functions.html" class="btn btn-neutral float-right" title="Predicates and Functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sets-and-relations.html" class="btn btn-neutral float-left" title="Sets and Relations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>