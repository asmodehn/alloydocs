

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Analyzer &mdash; Alloy Documentation  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Visualizer" href="visualizer.html" />
    <link rel="prev" title="Tooling" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Alloy Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/index.html">Language</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tooling</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Analyzer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-the-analyzer">Configuring the Analyzer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#recursion-depth">Recursion Depth</a></li>
<li class="toctree-l4"><a class="reference internal" href="#unsat-core">Unsat Core</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="visualizer.html">Visualizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="themes.html">Themes</a></li>
<li class="toctree-l2"><a class="reference internal" href="markdown.html">Markdown</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/index.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../techniques/index.html">Techniques</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Alloy Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Tooling</a> &raquo;</li>
        
      <li>Analyzer</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tooling/analyzer.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="analyzer">
<span id="id1"></span><h1>Analyzer<a class="headerlink" href="#analyzer" title="Permalink to this headline">¶</a></h1>
<p>The <strong>Alloy Analyzer</strong> is the tool that actually checks your spec.</p>
<div class="section" id="configuring-the-analyzer">
<h2>Configuring the Analyzer<a class="headerlink" href="#configuring-the-analyzer" title="Permalink to this headline">¶</a></h2>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>make a link to SAT, explain what Kodkod is</p>
</div>
<p>The analyzer converts the model into a SAT expression to solve. Some of the options are configurable. By default you should not need to change any of these- most performance issues are better solved by improving the spec itself. The following all affect the runtime of the analyzer. All of these are under the “Options” toolbar of the IDE:</p>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>maximum stack</p>
</div>
<ul class="simple">
<li><p><strong>Allow Warnings:</strong> When “no”, the analyzer will halt if the model has any warnings. Warnings usually, but not always, correspond to errors in the spec.</p></li>
<li><p><strong>Maximum Memory:</strong> How much RAM the analyzer is allowed to use when solving.</p></li>
<li><p><strong>Solver:</strong> The SAT solver to use for finding the model. Different solvers may have different performance on different specs. The SAT model and Kodkod model can also be output to a temporary file here.  There are additional special options for MiniSat with <a class="reference internal" href="#unsat-core"><span class="std std-ref">Unsat Core</span></a>, below.</p></li>
<li><p><strong>Skolem Depth:</strong> see below</p></li>
<li><p><strong>Recursion Depth:</strong> see below</p></li>
<li><p><strong>Record the Kodkod input/output:</strong> when <code class="docutils literal notranslate"><span class="pre">true</span></code>, the Kodkod output for the run can be seen by clicking the <em>Predicate</em> link in the output.</p></li>
</ul>
<img alt="../_images/kodkod.png" src="../_images/kodkod.png" />
<ul class="simple">
<li><p><strong>Prevent Overflows:</strong> If an <a class="reference internal" href="../language/sets-and-relations.html#integers"><span class="std std-ref">arithmetic operation</span></a> would overflow the model, the predicate is treated as false.</p></li>
</ul>
<div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<ol class="arabic">
<li><p>figure out who knows Skolem Depth. From <a class="reference external" href="http://alloytools.org/quickguide/gui.html">here</a>:</p>
<blockquote>
<div><p>&gt; Skolem Depth: This controls the maximum depth of alternating
universal-vs-existential quantifier that we will permit when
generating a skolem function. If a formula exceeds this depth, we
will not generate a skolem function for it.</p>
</div></blockquote>
<p>but that doesn’t explain it in a way that’s useful for most readers</p>
</li>
<li><p>Figure out who knows what “Infer partial instances”. does.</p></li>
</ol>
<blockquote>
<div><p>[We might just leave it out of this version]</p>
</div></blockquote>
</div>
<div class="advanced section" id="recursion-depth">
<span id="recursion"></span><h3>Recursion Depth<a class="headerlink" href="#recursion-depth" title="Permalink to this headline">¶</a></h3>
<p>Predicates and functions are normally not recursive- they may not call
themselves. The following is an invalid predicate:</p>
<div class="highlight-alloy notranslate"><div class="highlight"><pre><span></span><span class="kd">sig</span> <span class="n">Node</span> <span class="o">{</span>
    <span class="n">edge</span><span class="p">:</span> <span class="k">set</span> <span class="n">Node</span>
<span class="o">}</span>

<span class="k">fact</span> <span class="o">{</span><span class="k">no</span> <span class="kc">iden</span> <span class="o">&amp;</span> <span class="o">^</span><span class="n">edge</span><span class="o">}</span>

<span class="k">pred</span> <span class="n">binary_tree</span><span class="o">[</span><span class="n">n</span><span class="p">:</span> <span class="n">Node</span><span class="o">]</span> <span class="o">{</span>
    <span class="o">#</span><span class="n">n</span><span class="o">.</span><span class="n">edge</span> <span class="o">&lt;=</span> <span class="mi">2</span>
    <span class="k">all</span> <span class="n">child</span><span class="p">:</span> <span class="n">n</span><span class="o">.</span><span class="n">edge</span> <span class="o">|</span>
    <span class="c1">// recursive call</span>
        <span class="n">binary_tree</span><span class="o">[</span><span class="n">child</span><span class="o">]</span>
<span class="o">}</span>

<span class="k">run</span> <span class="o">{</span><span class="k">some</span> <span class="n">n</span><span class="p">:</span> <span class="n">Node</span> <span class="o">|</span> <span class="n">binary_tree</span><span class="o">[</span><span class="n">n</span><span class="o">]}</span>
</pre></div>
</div>
<p>This is invalid because all Alloy models must be bound, and recursive
calls can lead to an unbound model. Normally you should restructure your
model to not need a recursive call. If you <em>must</em> have a recursive
predicate or function, you can set the <code class="docutils literal notranslate"><span class="pre">recursion</span> <span class="pre">depth</span></code> to a maximum
of 3.</p>
<p>The recursion depth is treated as a “fact”: the analyzer will not look
for models with a greater recursion depth, even if it would lead to a
valid example or counterexample.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Increasing the recursion depth will slow down your spec.</p>
</div>
</div>
<div class="advanced section" id="unsat-core">
<span id="id5"></span><h3>Unsat Core<a class="headerlink" href="#unsat-core" title="Permalink to this headline">¶</a></h3>
<p>By default Alloy is packaged with <a class="reference external" href="http://minisat.se/">Minisat</a>,
which also has an <em>Unsat Core</em>. When “MiniSat with Unsat Core” is
selected as the solver, the analyzer can isolate which constraints
prevent the analyzer from finding a counter/example. See
<a class="reference external" href="http://alloytools.org/quickguide/unsat.html">here</a> for more
information.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, the Windows version of Alloy does not come with MiniSAT.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The “Core Granularity” option is not strictly increasing in terms of information: a slower setting might, in some circumstances, lead to the core providing <em>less</em> information. Given the following model:</p>
<div class="highlight-alloy notranslate"><div class="highlight"><pre><span></span><span class="kd">sig</span> <span class="n">Node</span> <span class="o">{</span>
    <span class="n">edge</span><span class="p">:</span> <span class="k">some</span> <span class="n">Node</span>
<span class="o">}</span>

<span class="k">fact</span> <span class="o">{</span><span class="k">some</span> <span class="n">Node</span><span class="o">}</span>

<span class="k">run</span> <span class="o">{</span><span class="k">no</span> <span class="n">edge</span><span class="o">}</span>
</pre></div>
</div>
<p>All granularity settings will highlight three formulas <em>except</em> for
“expand quantifiers”, which will only highlight two. However, all three
constraints are required to make the predicate inconsistent.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="visualizer.html" class="btn btn-neutral float-right" title="Visualizer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Tooling" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>